<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Echo Seven – Follow on Apple Music or Spotify</title>
  <meta property="og:title" content="Echo Seven – Artist Page" />
  <meta property="og:description" content="Follow Echo Seven on your favourite music service." />
  <meta property="og:type" content="website" />
  <meta name="twitter:card" content="summary" />
  <style>
    :root {
      color-scheme: dark;
      --bg-1:#0b0b0b; --bg-2:#121212; --text:#fff;
      --spotify:#1DB954; --apple:#ffffff; --muted:#9aa0a6; --ring:#2a2a2a;
    }
    html,body{height:100%}
    body{
      font-family: system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif; color:var(--text);
      margin:0; min-height:100vh; display:flex; align-items:center; justify-content:center;
      padding:24px; background:radial-gradient(140% 100% at 50% 0, #1a1a1a 0%, var(--bg-1) 60%, #000 100%);
    }
    .card{
      width:100%; max-width:820px; background:var(--bg-2); border-radius:20px;
      box-shadow:0 20px 60px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.02);
      padding:clamp(18px, 2.4vw, 32px); text-align:center; display:flex; flex-direction:column; align-items:center; gap:14px;
      border:1px solid var(--ring);
    }
    h1{ margin:0; font-weight:800; letter-spacing:.2px; font-size:clamp(22px, 3.4vw, 36px); }
    .lead{ margin:4px 0 4px; opacity:.88; font-size:clamp(14px, 1.5vw, 16px); }

    /* Buttons */
    .btns{ display:grid; grid-template-columns:1fr; gap:12px; width:100%; max-width:560px; margin-top:6px; }
    @media (min-width: 680px){ .btns{ grid-template-columns:1fr 1fr; } }
    .btn{ appearance:none; border:0; cursor:pointer; padding:14px 18px; border-radius:999px; font-weight:800; font-size:16px; display:flex; align-items:center; justify-content:center; gap:10px; transition:transform .06s ease, box-shadow .2s ease; box-shadow:0 6px 18px rgba(0,0,0,.25); }
    .btn:active{ transform:translateY(1px); }
    .btn-spotify{ background:var(--spotify); color:#000; }
    .btn-apple{ background:var(--apple); color:#000; }
    .hint{ font-size:12px; opacity:.78; margin-top:6px; }

    /* Preview */
    #teaserMount{ width:100%; max-width:620px; order:2; }
    .player-wrap{ width:100%; border-radius:12px; overflow:hidden; box-shadow:0 8px 24px rgba(0,0,0,.35); border:1px solid var(--ring); }
    iframe{ display:block; width:100%; height:72px; }
    @media (min-width: 680px){ iframe{ height:80px; } }

    /* Nudge */
    .nudge{ display:none; align-items:center; gap:10px; margin-top:8px; font-size:13px; color:#e6e6e6; }
    .nudge.show{ display:flex; animation:fadeIn .3s ease forwards; }
    .btn-mini{ padding:8px 12px; border-radius:999px; border:1px solid var(--ring); background:#1a1a1a; color:#fff; cursor:pointer; }
    .btn-mini:hover{ filter:brightness(1.08); }
    @keyframes fadeIn{ from{ opacity:0; transform:translateY(4px);} to{ opacity:1; transform:translateY(0);} }

    /* In-app browser helper */
    .iab{ display:none; width:100%; max-width:620px; background:#181818; border:1px solid var(--ring); color:#eaeaea; padding:10px 12px; border-radius:12px; font-size:13px; gap:8px; align-items:center; justify-content:space-between; }
    .iab.show{ display:flex; }
    .iab .left{ display:flex; gap:10px; align-items:center; text-align:left; }
    .iab .pill{ padding:8px 10px; border-radius:999px; background:#262626; border:1px solid var(--ring); color:#fff; cursor:pointer; }

    /* Footer small links */
    .small{ font-size:12px; opacity:.72; margin-top:8px; }

    /* Focus states for accessibility */
    .btn:focus-visible,.btn-mini:focus-visible{ outline:2px solid #fff; outline-offset:2px; box-shadow:0 0 0 4px rgba(255,255,255,.2); }

    /* Respect reduced motion */
    @media (prefers-reduced-motion: reduce){ .btn{ transition:none } }
  </style>

  <!-- Meta Pixel -->
  <script>
    !(function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
    n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)})(window,document,'script','https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '3718618815109659');
    fbq('track', 'PageView');
  </script>
  <noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=3718618815109659&ev=PageView&noscript=1" /></noscript>

  <script>
    // --- Config ---
    const cfg = {
      utm: "utm_source=meta&utm_medium=paid&utm_campaign=echo_seven_follow",
      spotifyArtistId: "1xdDfEI9pjuEXglEaK8k4u",
      appleArtistFullUrl: "https://music.apple.com/gb/artist/echo-seven/1827674820",
      spotifyTrackId: "1Non9dMlsEcC5Mavv684al"
    };

    // --- Env detection ---
    const UA = navigator.userAgent || navigator.vendor || window.opera || "";
    const isIPadOSDesktop = /Macintosh/i.test(UA) && (("ontouchend" in document) || (navigator.maxTouchPoints>1));
    const isIOS = /iPad|iPhone|iPod/i.test(UA) || isIPadOSDesktop;
    const isAndroid = /Android/i.test(UA);
    const isDesktop = !isIOS && !isAndroid;
    const isInApp = /Instagram|FBAN|FBAV|FBIOS|FB_IAB|Line\/.+|TikTok|Twitter/i.test(UA);

    // --- i18n (simple) ---
    const i18n = {
      en:{ title:"Follow Echo Seven", lead:"Listen to a quick preview, then follow on your favourite music service.", nudge:"Like it? Follow Echo Seven →", iab:"This in‑app browser may block music links. Open in your browser for the best experience." },
      es:{ title:"Sigue a Echo Seven", lead:"Escucha un adelanto y síguenos en tu app favorita.", nudge:"¿Te gusta? Sigue a Echo Seven →", iab:"Este navegador integrado puede bloquear enlaces. Ábrelo en tu navegador para mejor experiencia." },
      de:{ title:"Folge Echo Seven", lead:"Hör kurz rein und folge in deiner Lieblings‑App.", nudge:"Gefällt dir das? Folge Echo Seven →", iab:"Dieser In‑App‑Browser kann Links blockieren. Im Browser öffnen für die beste Erfahrung." },
      fr:{ title:"Suivre Echo Seven", lead:"Écoutez un extrait puis suivez‑nous dans votre application préférée.", nudge:"Vous aimez ? Suivez Echo Seven →", iab:"Ce navigateur intégré peut bloquer des liens. Ouvrez dans votre navigateur pour une meilleure expérience." },
      it:{ title:"Segui Echo Seven", lead:"Ascolta un'anteprima e segui nell'app preferita.", nudge:"Ti piace? Segui Echo Seven →", iab:"Questo browser in‑app può bloccare i link. Apri nel browser per un'esperienza migliore." },
      nl:{ title:"Volg Echo Seven", lead:"Luister kort en volg in je favoriete app.", nudge:"Bevalt het? Volg Echo Seven →", iab:"Deze in‑app browser kan links blokkeren. Open in je browser voor de beste ervaring." },
      pl:{ title:"Obserwuj Echo Seven", lead:"Posłuchaj fragmentu i obserwuj w ulubionej aplikacji.", nudge:"Podoba się? Obserwuj Echo Seven →", iab:"Ta przeglądarka w aplikacji może blokować linki. Otwórz w przeglądarce dla lepszego działania." },
      tr:{ title:"Echo Seven'ı takip et", lead:"Kısa bir önizleme dinle, sonra favorit uygulamada takip et.", nudge:"Sevdin mi? Echo Seven'ı takip et →", iab:"Uygulama içi tarayıcı bağlantıları engelleyebilir. En iyi deneyim için tarayıcıda aç." },
      sv:{ title:"Följ Echo Seven", lead:"Lyssna kort och följ i din favoritapp.", nudge:"Gillar du det? Följ Echo Seven →", iab:"Den här in‑app‑webbläsaren kan blockera länkar. Öppna i din webbläsare för bästa upplevelse." },
      fi:{ title:"Seuraa Echo Seven", lead:"Kuuntele esikatselu ja seuraa lempisovelluksessa.", nudge:"Pidätkö? Seuraa Echo Seven →", iab:"Sovelluksen sisäinen selain voi estää linkkejä. Avaa selaimessa parhaan kokemuksen saamiseksi." },
      no:{ title:"Følg Echo Seven", lead:"Hør et kort utdrag og følg i favorittappen din.", nudge:"Liker du det? Følg Echo Seven →", iab:"Denne innebygde nettleseren kan blokkere lenker. Åpne i nettleser for best opplevelse." },
      pt:{ title:"Siga Echo Seven", lead:"Ouça uma prévia e siga no seu app favorito.", nudge:"Curtiu? Siga Echo Seven →", iab:"Este navegador do app pode bloquear links. Abra no navegador para a melhor experiência." }
    };
    function detectLang(){
      const p = new URLSearchParams(location.search);
      const override = (p.get('lang')||'').toLowerCase();
      if (override && i18n[override]) return override;
      const nav = (navigator.language||'en').slice(0,2).toLowerCase();
      return i18n[nav] ? nav : 'en';
    }

    // Build UTM string from query if present; else use default
    function utmFromQueryOrDefault(){
      const p = new URLSearchParams(location.search);
      const q = new URLSearchParams();
      for (const [k,v] of p.entries()) if (/^utm_/i.test(k)) q.set(k,v);
      const str = q.toString();
      return str || cfg.utm;
    }
    function appendUtm(url){
      const utm = utmFromQueryOrDefault();
      return utm ? `${url}${url.includes('?') ? '&' : '?'}${utm}` : url;
    }
    function appendUtmSrcLang(url, source){
      let out = appendUtm(url);
      const lang = detectLang();
      const extra = new URLSearchParams({ src: source||'cta', lang });
      out += (out.includes('?')?'&':'?') + extra.toString();
      return out;
    }

    // --- Follow handlers — deep link on iOS (on click), with clean fallbacks ---
    function pausePreview(){ /* reserved if we reintroduce HTML5 audio */ }

    function openSpotify(inNewTab=false, source='cta'){
      pausePreview();
      try{ fbq('trackCustom','FollowClick',{service:'spotify',source}); }catch(_){ }
      const appUri = `spotify://artist/${cfg.spotifyArtistId}`;
      const webUrl = appendUtmSrcLang(`https://open.spotify.com/artist/${cfg.spotifyArtistId}`, source);
      if (isIOS){
        let fallbackTimer;
        const cancelFallback = () => {
          if (fallbackTimer) clearTimeout(fallbackTimer);
          document.removeEventListener('visibilitychange', onVisibility);
          window.removeEventListener('pagehide', cancelFallback);
          window.removeEventListener('blur', cancelFallback);
        };
        const onVisibility = () => { if (document.hidden) cancelFallback(); };
        document.addEventListener('visibilitychange', onVisibility);
        window.addEventListener('pagehide', cancelFallback);
        window.addEventListener('blur', cancelFallback);
        location.href = appUri;
        fallbackTimer = setTimeout(()=>{ if (!document.hidden) location.assign(webUrl); }, 1200);
        return;
      }
      if (isAndroid){
        const intent = `intent://artist/${cfg.spotifyArtistId}#Intent;scheme=spotify;package=com.spotify.music;S.browser_fallback_url=${encodeURIComponent(webUrl)};end`;
        location.href = intent; return;
      }
      if (inNewTab) window.open(webUrl, '_blank', 'noopener'); else location.href = webUrl;
    }

    function openApple(source='cta'){
      pausePreview();
      try{ fbq('trackCustom','FollowClick',{service:'apple',source}); }catch(_){ }
      const url = appendUtmSrcLang(cfg.appleArtistFullUrl, source);
      if (isIOS){ location.href = url; return; }
      if (isAndroid){
        const intent = `intent://${url.replace(/^https:\/\//,'')}#Intent;scheme=https;package=com.apple.android.music;S.browser_fallback_url=${encodeURIComponent(url)};end`;
        location.href = intent; return;
      }
      location.href = url;
    }

    // DOM ready
    document.addEventListener('DOMContentLoaded', ()=>{
      // Localise simple strings
      const lang = detectLang();
      document.documentElement.lang = lang;
      const t = i18n[lang] || i18n.en;
      const h1 = document.getElementById('t_title'); if (h1) h1.textContent = t.title;
      const lead = document.getElementById('t_lead'); if (lead) lead.textContent = t.lead;
      const nudgeText = document.getElementById('t_nudge'); if (nudgeText) nudgeText.textContent = t.nudge;

      // In‑app browser helper
      const iab = document.getElementById('iab');
      if (isInApp && iab){
        iab.classList.add('show');
        const iabText = document.getElementById('t_iab');
        if (iabText) iabText.textContent = t.iab;
        const copyBtn = document.getElementById('iabCopy');
        if (copyBtn){ copyBtn.addEventListener('click', async ()=>{
          try{ await navigator.clipboard.writeText(location.href); copyBtn.textContent='Link copied'; setTimeout(()=>copyBtn.textContent='Copy link', 1800); }catch(_){ /* ignore */ }
        }); }
      }

      // Buttons
      document.getElementById('btnApple').addEventListener('click', ()=>openApple('cta'));
      document.getElementById('btnSpotify').addEventListener('click', ()=>openSpotify(isDesktop, 'cta'));

      // Button hints
      const appleHint = document.getElementById('appleHint');
      const spotifyHint = document.getElementById('spotifyHint');
      if (isIOS){ appleHint.textContent = 'Opens Apple Music app'; spotifyHint.textContent = 'Opens Spotify app'; }
      else if (isAndroid){ appleHint.textContent = 'Opens Apple Music app'; spotifyHint.textContent = 'Opens Spotify app'; }
      else { appleHint.textContent = 'Opens Apple Music website'; spotifyHint.textContent = 'Opens Spotify in new tab'; }

      // Compact Spotify preview (familiar look)
      const mount = document.getElementById('teaserMount');
      if (mount){
        mount.innerHTML = `<div class="player-wrap"><iframe title="Spotify track preview" src="https://open.spotify.com/embed/track/${cfg.spotifyTrackId}" frameborder="0"
          allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe></div>`;
        try{ fbq('trackCustom','PreviewShown',{track:'Latitude Daze'}); }catch(_){ }
      }

      // Gentle follow nudge after 6s
      const nudge = document.getElementById('nudge');
      setTimeout(()=>{
        if (!nudge) return;
        nudge.classList.add('show');
        try{ fbq('trackCustom','NudgeShown',{}); }catch(_){ }
      }, 6000);

      // Nudge buttons (explicit source tagging)
      const nudgeApple = document.getElementById('nudgeApple');
      const nudgeSpotify = document.getElementById('nudgeSpotify');
      if (nudgeApple) nudgeApple.addEventListener('click', (e)=>{ e.preventDefault(); openApple('nudge'); });
      if (nudgeSpotify) nudgeSpotify.addEventListener('click', (e)=>{ e.preventDefault(); openSpotify(isDesktop, 'nudge'); });
    });
  </script>
</head>
<body>
  <div class="card">
    <div id="iab" class="iab" role="status">
      <div class="left">⚠️ <span id="t_iab">This in‑app browser may block music links. Open in your browser for the best experience.</span></div>
      <button id="iabCopy" class="pill" type="button">Copy link</button>
    </div>

    <h1 id="t_title">Follow Echo Seven</h1>
    <p id="t_lead" class="lead">Listen to a quick preview, then follow on your favourite music service.</p>

    <div class="btns">
      <button id="btnApple" class="btn btn-apple" aria-label="Follow on Apple Music">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M16.36 1.64a4.3 4.3 0 0 1-1.06 3.3 3.69 3.69 0 0 1-2.82 1.35 4.05 4.05 0 0 1 1.12-3.2A4.37 4.37 0 0 1 16.36 1.64ZM20.4 17.62c-.36.82-.79 1.58-1.3 2.29-.69.97-1.25 1.64-1.69 2a3.9 3.9 0 0 1-2.5.95c-.63 0-1.39-.18-2.28-.54-.9-.36-1.73-.54-2.5-.54-.82 0-1.69.18-2.6.54-.9.36-1.63.55-2.18.58-.95.04-1.87-.3-2.76-1.01-.56-.46-1.16-1.16-1.8-2.1C.28 18.76-.1 17.6 0 16.5c.07-1.1.44-2.13 1.12-3.08.74-1.07 1.72-1.86 2.95-2.38.77-.32 1.6-.49 2.47-.5.49 0 1.13.15 1.93.45.79.3 1.3.45 1.54.45.17 0 .69-.18 1.57-.54.85-.33 1.56-.47 2.12-.42 1.56.13 2.73.73 3.53 1.8-1.4.84-2.1 2.03-2.09 3.57.01 1.19.45 2.18 1.33 2.97.4.38.85.67 1.35.87.11.04.2.06.26.06.05 0 .12-.01.2-.05.05-.02.1-.05.14-.08.06-.04.12-.1.18-.17.08-.09.16-.21.25-.35Zm-5.61-13.4c.44-.53.77-1.13 1-1.8l.1-.28.27-.05c.25-.05.6-.09 1.02-.09 1.08 0 2 .27 2.76.82a3.6 3.6 0 0 1 1.33 1.87c-.13 .05-.31 .11-.55 .18-.26 .08-.48 .14-.67 .2a4 4 0 0 1-1.05 .14 4.9 4.9 0 0 1-1.23 -.16 8.05 8.05 0 0 1-1.35 -.53c-.42 -.2-.81 -.45-1.16 -.74Z"/></svg>
        Apple Music
      </button>
      <div id="appleHint" class="hint" aria-live="polite"></div>

      <button id="btnSpotify" class="btn btn-spotify" aria-label="Follow on Spotify">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 1.5C6.2 1.5 1.5 6.2 1.5 12S6.2 22.5 12 22.5 22.5 17.8 22.5 12 17.8 1.5 12 1.5Zm5.28 15.47a.9.9 0 0 1-1.24.27c-3.4-2.08-7.68-2.55-12.72-1.39a.9.9 0 1 1-.4-1.76c5.45-1.23 10.1-.68 13.86 1.6.42.25.55.79.3 1.28Zm1.68-3.38a1.12 1.12 0 0 1-1.54.34c-3.9-2.38-9.85-3.08-14.45-1.68a1.12 1.12 0 1 1-.63-2.15c5.2-1.52 11.78-.74 16.2 1.93.52.32.7 1 .42 1.56Zm.15-3.58c-4.65-2.76-12.33-3.01-16.77-1.65a1.35 1.35 0 0 1-.78-2.59c5.08-1.54 13.57-1.26 18.9 1.85a1.35 1.35 0 1 1-1.35 2.34Z"/></svg>
        Spotify
      </button>
      <div id="spotifyHint" class="hint" aria-live="polite"></div>
    </div>

    <div id="teaserMount" aria-live="polite"></div>

    <div id="nudge" class="nudge" aria-live="polite">
      <span id="t_nudge">Like it? Follow Echo Seven →</span>
      <button id="nudgeApple" class="btn-mini" type="button">Apple Music</button>
      <button id="nudgeSpotify" class="btn-mini" type="button">Spotify</button>
    </div>

    <p class="small">Direct links: <a href="https://music.apple.com/gb/artist/echo-seven/1827674820">Apple Music</a> · <a href="https://open.spotify.com/artist/1xdDfEI9pjuEXglEaK8k4u">Spotify</a></p>
  </div>
</body>
</html>
