<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Echo Seven – Follow on Apple Music or Spotify</title>
  <meta property="og:title" content="Echo Seven – Artist Page" />
  <meta property="og:description" content="Follow Echo Seven on your favourite music service." />
  <meta property="og:type" content="website" />
  <meta name="twitter:card" content="summary" />
  <style>
    :root {
      color-scheme: dark;
      --bg-1:#0b0b0b; --bg-2:#121212; --text:#fff;
      --spotify:#1DB954; --apple:#ffffff; --muted:#9aa0a6; --ring:#2a2a2a;
    }
    html,body{height:100%}
    body{
      font-family: system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif; color:var(--text);
      margin:0; min-height:100vh; display:flex; align-items:center; justify-content:center;
      padding:24px; background:radial-gradient(140% 100% at 50% 0, #1a1a1a 0%, var(--bg-1) 60%, #000 100%);
    }
    .card{
      width:100%; max-width:820px; background:var(--bg-2); border-radius:20px;
      box-shadow:0 20px 60px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.02);
      padding:clamp(18px, 2.4vw, 32px); text-align:center; display:flex; flex-direction:column; align-items:center; gap:14px;
      border:1px solid var(--ring);
    }    h1{ margin:0; font-weight:800; letter-spacing:.2px; font-size:clamp(22px, 3.4vw, 36px); }
    .lead{ margin:4px 0 4px; opacity:.88; font-size:clamp(14px, 1.5vw, 16px); }

    /* Buttons */
    .btns{ display:grid; grid-template-columns:1fr; gap:12px; width:100%; max-width:560px; margin-top:6px; }
    @media (min-width: 680px){ .btns{ grid-template-columns:1fr 1fr; } }
    .btn{ appearance:none; border:0; cursor:pointer; padding:14px 18px; border-radius:999px; font-weight:800; font-size:16px; display:flex; align-items:center; justify-content:center; gap:10px; transition:transform .06s ease, box-shadow .2s ease; box-shadow:0 6px 18px rgba(0,0,0,.25); }
    .btn:active{ transform:translateY(1px); }
    .btn-spotify{ background:var(--spotify); color:#000; }
    .btn-apple{ background:var(--apple); color:#000; }
    .hint{ font-size:12px; opacity:.78; margin-top:6px; }

    /* Preview */
    #teaserMount{ width:100%; max-width:620px; order:2; }
    .player-wrap{ width:100%; border-radius:12px; overflow:hidden; box-shadow:0 8px 24px rgba(0,0,0,.35); border:1px solid var(--ring); }
    iframe{ display:block; width:100%; height:72px; }
    @media (min-width: 680px){ iframe{ height:80px; } }

    /* Footer small links */
    .small{ font-size:12px; opacity:.72; margin-top:8px; }

    /* Focus states for accessibility */
    .btn:focus-visible{ outline:2px solid #fff; outline-offset:2px; box-shadow:0 0 0 4px rgba(255,255,255,.2); }

    /* Respect reduced motion */
    @media (prefers-reduced-motion: reduce){ .btn{ transition:none } }
  </style>
  <script>
    // --- Config ---
    const cfg = {
      utm: "utm_source=ad&utm_medium=landing&utm_campaign=echo_seven_follow",
      spotifyArtistId: "1xdDfEI9pjuEXglEaK8k4u",
      appleArtistFullUrl: "https://music.apple.com/gb/artist/echo-seven/1827674820",
      spotifyTrackId: "1Non9dMlsEcC5Mavv684al"
    };

    // --- Env detection ---
    const UA = navigator.userAgent || navigator.vendor || window.opera || "";
    const isIPadOSDesktop = /Macintosh/i.test(UA) && (("ontouchend" in document) || (navigator.maxTouchPoints>1));
    const isIOS = /iPad|iPhone|iPod/i.test(UA) || isIPadOSDesktop;
    const isAndroid = /Android/i.test(UA);
    const isDesktop = !isIOS && !isAndroid;

    function appendUtm(url){ return cfg.utm ? `${url}${url.includes('?') ? '&' : '?'}${cfg.utm}` : url; }

    // --- Follow handlers — deep link on iOS (on click), with clean fallbacks ---
    function pausePreview(){ /* kept if we reintroduce HTML5 audio later */ }

    function openSpotify(inNewTab=false){
      pausePreview();
      const appUri = `spotify://artist/${cfg.spotifyArtistId}`;
      const webUrl = appendUtm(`https://open.spotify.com/artist/${cfg.spotifyArtistId}`);
      if (isIOS){
        // iOS: try to open the app; ONLY fall back to web if the page never hid (app didn't open)
        let fallbackTimer;
        const cancelFallback = () => {
          if (fallbackTimer) clearTimeout(fallbackTimer);
          document.removeEventListener('visibilitychange', onVisibility);
          window.removeEventListener('pagehide', cancelFallback);
          window.removeEventListener('blur', cancelFallback);
        };
        const onVisibility = () => { if (document.hidden) cancelFallback(); };
        document.addEventListener('visibilitychange', onVisibility);
        window.addEventListener('pagehide', cancelFallback);
        window.addEventListener('blur', cancelFallback);

        // Kick to the app
        location.href = appUri;
        // Fallback ONLY if we stayed visible (app failed to open)
        fallbackTimer = setTimeout(()=>{ if (!document.hidden) location.assign(webUrl); }, 1200);
        return;
      }
      if (isAndroid){
        const intent = `intent://artist/${cfg.spotifyArtistId}#Intent;scheme=spotify;package=com.spotify.music;S.browser_fallback_url=${encodeURIComponent(webUrl)};end`;
        location.href = intent; return;
      }
      if (inNewTab) window.open(webUrl, '_blank', 'noopener'); else location.href = webUrl;
    }

    function openApple(){
      pausePreview();
      const url = appendUtm(cfg.appleArtistFullUrl);
      if (isIOS){ location.href = url; return; }
      if (isAndroid){
        const intent = `intent://${url.replace(/^https:\/\//,'')}#Intent;scheme=https;package=com.apple.android.music;S.browser_fallback_url=${encodeURIComponent(url)};end`;
        location.href = intent; return;
      }
      location.href = url;
    }

    // DOM ready
    document.addEventListener('DOMContentLoaded', ()=>{
      // Buttons
      document.getElementById('btnApple').addEventListener('click', openApple);
      document.getElementById('btnSpotify').addEventListener('click', ()=>openSpotify(isDesktop));

      // Button hints
      const appleHint = document.getElementById('appleHint');
      const spotifyHint = document.getElementById('spotifyHint');
      if (isIOS){ appleHint.textContent = 'Opens Apple Music app'; spotifyHint.textContent = 'Opens Spotify app'; }
      else if (isAndroid){ appleHint.textContent = 'Opens Apple Music app'; spotifyHint.textContent = 'Opens Spotify app'; }
      else { appleHint.textContent = 'Opens Apple Music website'; spotifyHint.textContent = 'Opens Spotify in new tab'; }

      // Compact Spotify preview (familiar look)
      const mount = document.getElementById('teaserMount');
      if (mount){
        mount.innerHTML = `<div class="player-wrap"><iframe src="https://open.spotify.com/embed/track/${cfg.spotifyTrackId}" frameborder="0"
          allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe></div>`;
      }
    });
  </script>
</head>
<body>
  <div class="card">
        <h1>Follow Echo Seven</h1>
    <p class="lead">Listen to a quick preview, then follow on your favourite music service.</p>

    <div class="btns">
      <button id="btnApple" class="btn btn-apple" aria-label="Follow on Apple Music">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M16.36 1.64a4.3 4.3 0 0 1-1.06 3.3 3.69 3.69 0 0 1-2.82 1.35 4.05 4.05 0 0 1 1.12-3.2A4.37 4.37 0 0 1 16.36 1.64ZM20.4 17.62c-.36.82-.79 1.58-1.3 2.29-.69.97-1.25 1.64-1.69 2a3.9 3.9 0 0 1-2.5.95c-.63 0-1.39-.18-2.28-.54-.9-.36-1.73-.54-2.5-.54-.82 0-1.69.18-2.6.54-.9.36-1.63.55-2.18.58-.95.04-1.87-.3-2.76-1.01-.56-.46-1.16-1.16-1.8-2.1C.28 18.76-.1 17.6 0 16.5c.07-1.1.44-2.13 1.12-3.08.74-1.07 1.72-1.86 2.95-2.38.77-.32 1.6-.49 2.47-.5.49 0 1.13.15 1.93.45.79.3 1.3.45 1.54.45.17 0 .69-.18 1.57-.54.85-.33 1.56-.47 2.12-.42 1.56.13 2.73.73 3.53 1.8-1.4.84-2.1 2.03-2.09 3.57.01 1.19.45 2.18 1.33 2.97.4.38.85.67 1.35.87.11.04.2.06.26.06.05 0 .12-.01.2-.05.05-.02.1-.05.14-.08.06-.04.12-.1.18-.17.08-.09.16-.21.25-.35Zm-5.61-13.4c.44-.53.77-1.13 1-1.8l.1-.28.27-.05c.25-.05.6-.09 1.02-.09 1.08 0 2 .27 2.76.82a3.6 3.6 0 0 1 1.33 1.87c-.13.05-.31.11-.55.18-.26.08-.48.14-.67.2a4 4 0 0 1-1.05.14 4.9 4.9 0 0 1-1.23-.16 8.05 8.05 0 0 1-1.35-.53c-.42-.2-.81-.45-1.16-.74Z"/></svg>
        Apple Music
      </button>
      <div id="appleHint" class="hint" aria-live="polite"></div>

      <button id="btnSpotify" class="btn btn-spotify" aria-label="Follow on Spotify">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 1.5C6.2 1.5 1.5 6.2 1.5 12S6.2 22.5 12 22.5 22.5 17.8 22.5 12 17.8 1.5 12 1.5Zm5.28 15.47a.9.9 0 0 1-1.24.27c-3.4-2.08-7.68-2.55-12.72-1.39a.9.9 0 1 1-.4-1.76c5.45-1.23 10.1-.68 13.86 1.6.42.25.55.79.3 1.28Zm1.68-3.38a1.12 1.12 0 0 1-1.54.34c-3.9-2.38-9.85-3.08-14.45-1.68a1.12 1.12 0 1 1-.63-2.15c5.2-1.52 11.78-.74 16.2 1.93.52.32.7 1 .42 1.56Zm.15-3.58c-4.65-2.76-12.33-3.01-16.77-1.65a1.35 1.35 0 0 1-.78-2.59c5.08-1.54 13.57-1.26 18.9 1.85a1.35 1.35 0 1 1-1.35 2.34Z"/></svg>
        Spotify
      </button>
      <div id="spotifyHint" class="hint" aria-live="polite"></div>
    </div>

    <div id="teaserMount" aria-live="polite"></div>

    <p class="small">Direct links: <a href="https://music.apple.com/gb/artist/echo-seven/1827674820">Apple Music</a> · <a href="https://open.spotify.com/artist/1xdDfEI9pjuEXglEaK8k4u">Spotify</a></p>
  </div>
</body>
</html>
